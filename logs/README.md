# MCP Test Logs Directory

This directory contains log files generated during MCP (Model Context Protocol) testing and smoke tests.

## Log File Types

### Smoke Test Logs

Generated by the smoke test scripts:

- **`mcp_smoke_test_YYYYMMDD_HHMMSS.log`** - Complete smoke test run log
  - Contains test execution details, pass/fail results, and error messages
  - Timestamped filename for easy identification
  - Example: `mcp_smoke_test_20241030_143022.log`

### JSON Request/Response Files

Sample JSON-RPC requests generated during testing:

- **`init_request.json`** - MCP server initialization request
- **`tools_list_request.json`** - Tools listing request
- **`echo_request.json`** - Echo tool execution request
- **`spawn_actor_request.json`** - Spawn actor tool execution request

### CI/CD Logs

When running in CI (GitHub Actions):

- Logs are automatically uploaded as workflow artifacts
- Available in the Actions tab under workflow run details
- Retained for 7 days by default

### Editor Logs

When running tests in Unreal Editor:

- Engine logs: `Saved/Logs/ChatGPTEditor.log`
- Search for `[MCP]` prefix for MCP-specific messages
- Automation test results visible in Session Frontend

## Attaching Logs to PRs

When submitting a PR that involves MCP functionality:

1. **Run Local Smoke Tests**

   ```bash
   # Linux/macOS
   ./tools/mcp/smoke_test.sh
   
   # Windows
   .\tools\mcp\smoke_test.ps1
   ```

2. **Collect Logs**

   After running tests, logs will be in this directory with timestamps.

3. **Review Logs**

   Check for:
   - Any test failures (FAILED status)
   - Warning messages
   - Error details
   - Performance metrics (if applicable)

4. **Attach to PR**

   You can attach logs to your PR in several ways:

   **Option A: GitHub UI**
   - Navigate to your PR on GitHub
   - Drag and drop log files into a comment
   - Add context explaining what the logs show

   **Option B: Gist**
   - Create a GitHub Gist with the log content
   - Link to the Gist in your PR description or comments

   **Option C: CI Artifacts**
   - For PRs, CI automatically uploads logs as artifacts
   - Reference the workflow run in your PR
   - Reviewers can download artifacts from the Actions tab

5. **Document Results**

   In your PR description, include:
   ```markdown
   ## Test Results
   
   - ✓ Build verification: PASSED
   - ✓ MCP initialization: PASSED
   - ✓ Tools list: PASSED
   - ✓ Echo tool: PASSED
   - ⚠ Spawn actor tool: PASSED (with warnings - expected in POC)
   
   Logs attached: [link or reference to logs]
   ```

## Log Retention

- **Local logs**: Keep for reference, clean up periodically
- **CI logs**: Automatically retained for 7 days via GitHub Actions
- **Critical failure logs**: Archive separately for debugging

## Example Log Files

### Successful Test Run

```
[2024-10-30 14:30:22] [INFO] ========================================
[2024-10-30 14:30:22] [INFO]   MCP POC Smoke Test
[2024-10-30 14:30:22] [INFO] ========================================
[2024-10-30 14:30:22] [INFO] Repository: /path/to/ChatGPTEditor
[2024-10-30 14:30:22] [INFO] Log directory: /path/to/ChatGPTEditor/logs
[2024-10-30 14:30:22] [INFO] Timestamp: 20241030_143022
...
[2024-10-30 14:30:45] [INFO] ✓ All smoke tests PASSED
[2024-10-30 14:30:45] [INFO] Total tests run: 8
[2024-10-30 14:30:45] [INFO] Tests passed: 8
[2024-10-30 14:30:45] [INFO] Tests failed: 0
```

### Failed Test Run

```
[2024-10-30 14:35:12] [ERROR] ✗ MCP initialization: FAILED
[2024-10-30 14:35:12] [ERROR] Error: Failed to parse JSON request
[2024-10-30 14:35:12] [ERROR] Details: Unexpected token at line 5
...
[2024-10-30 14:35:30] [ERROR] ✗ Some smoke tests FAILED
[2024-10-30 14:35:30] [INFO] Total tests run: 8
[2024-10-30 14:35:30] [INFO] Tests passed: 6
[2024-10-30 14:35:30] [ERROR] Tests failed: 2
```

## Troubleshooting

**No logs generated:**
- Verify the `logs/` directory exists in repository root
- Check that smoke test scripts have execute permissions
- Ensure you have write access to the logs directory

**Old logs accumulating:**
- Clean up manually: `rm logs/mcp_smoke_test_*.log`
- Or delete all except the latest: 
  ```bash
  ls -t logs/mcp_smoke_test_*.log | tail -n +2 | xargs rm
  ```

**Can't find CI logs:**
- Go to GitHub Actions tab in the repository
- Click on the relevant workflow run
- Scroll to "Artifacts" section at the bottom
- Download `mcp-smoke-test-logs` artifact

## Related Documentation

- [MCP POC Runbook](../docs/MCP_POC_RUNBOOK.md) - Build and test instructions
- [Testing Guide](../TESTING.md) - General testing documentation
- [MCP Implementation Checklist](../MCP_IMPLEMENTATION_CHECKLIST.MD) - Task tracking

## Notes

- This directory is tracked in git but log files (*.log, *.json) are gitignored
- Only this README is committed to the repository
- Log files are created at runtime and should not be committed
